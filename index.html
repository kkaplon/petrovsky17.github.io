<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700|Roboto+Condensed:700|Material+Icons" rel="stylesheet" type="text/css">
        <link href="https:////static.bab.la/css/bab1-1822.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <h5>Terms for testing:</h5>api query motivated pogrom get interlokutor dwuczłonowe zdanie react-test-renderer 
        <br><br>
        <h5>Bookmarks:<h5>
            <a title="Lento" href='javascript: async function dImg(name, src) {const image = await fetch(src);const imageBlog = await image.blob();const imageURL = URL.createObjectURL(imageBlog);const link = document.createElement("a");link.href = imageURL;link.download = name;document.body.appendChild(link);link.click();document.body.removeChild(link); }navigator.clipboard.writeText(JSON.stringify({title:document.querySelector("h2").innerHTML,phone:window.atob(document.querySelector(".btn-blue.phone-partial.licon-phone-f").dataset.phone),location:document.querySelector(".userbox-location-city.licon-pin-f").innerHTML,price:document.querySelector(".price")?document.querySelector(".price").innerHTML.replace("zł","").replace(/ /g,""):null,description:document.querySelector(".desc.text-15").innerHTML.replace(/<h3.+>.+<\/h3>/,""),}));dImg(Date.now(),document.querySelector("#big-img picture img").src);'>LENTO</a>
            <br/>
            <a title="Ogłaszamy24h" href='javascript: var lento24 %3D %7B%7D%3B navigator.clipboard.readText().then(data %3D> lento24 %3D JSON.parse(data))%3BsetTimeout(()%3D>%7BArray.from(document.querySelectorAll(".select_kategoria > option")).forEach( e %3D> e.value %3D%3D 936 %3F e.selected %3D true : "")%3Bdocument.querySelector(".select_kategoria").dispatchEvent(new Event("change"))%3BArray.from(document.querySelectorAll(".select_kategoria.select_podkategorie > option")).forEach( e %3D> e.value %3D%3D 976 %3F e.selected %3D true : "")%3BArray.from(document.querySelectorAll("select%5Bname%3Dtyp%5D > option")).forEach( e %3D> e.value %3D%3D 1 %3F e.selected %3D true : "")%3Bdocument.querySelector("input%5Bname%3Dtytul%5D").value%3Dlento24.title%3Bdocument.querySelector("input%5Bname%3Dlokalizacja%5D").value%3Dlento24.location%3Bdocument.querySelector("input%5Bname%3Dformularz_kontaktowy%5D").checked%3Dfalse%3Bdocument.querySelector("input%5Bname%3Dcena%5D").value%3Dlento24.price%3Bdocument.querySelector("input%5Bname%3Dtelefon%5D").value%3Dlento24.phone%3BCKEDITOR.instances.opis.setData(lento24.description)%7D,100)%3B'>OGŁASZAMY24H</a>
            <br/>
            <a title="RejectAll" href='javascript:Array.from(document.querySelectorAll(".fc-preference-slider > input[type=checkbox]")).forEach(e => e.checked = false);document.querySelector(".fc-confirm-choices").click();'>Reject</a>
            <br/>
            <a title="RejectAll" href='javascript:(function(){cifr = document.querySelector("#cmp-iframe").contentDocument;Array.from(cifr.querySelectorAll("button[type=button]")).shift().click();setTimeout(() => {Array.from(cifr.querySelectorAll(".MuiSwitch-root")).forEach((e, i) => i%2 ? e.click(): null);}, 10);setTimeout(() => {const b = Array.from(cifr.querySelectorAll("button[type=button]")); b.pop();b.pop().click();}, 20);})()'>Reject2</a>
            <br/>
            <a title="RejectAll" href='javascript:(function(){document.querySelector(".cmp-intro_rejectAll").click();setTimeout(()=>{Array.from(document.querySelectorAll(".cmp-switch_isSelected")).forEach(e => e.click());},10);setTimeout(()=>{document.querySelector(".cmp-details_save").click();},20);})()'>RejectOnet</a>
            <br/>
            <a title="RejectAll" href='javascript:(function(){document.querySelector(".rodo-popup-settings").click();setTimeout(()=>{Array.from(document.querySelectorAll("label.checked")).forEach(e => e.click());},10);setTimeout(()=>{document.querySelector(".rodo-popup-save").click();},20);})()'>RejectInteria</a>
            <br/>
            <a href="javascript: var lento24 = {};navigator.clipboard.readText().then(data => lento24 = JSON.parse(data));setTimeout(()=>{Array.from(document.querySelectorAll("select[title=Kategoria]")[0].querySelectorAll("option")).forEach(e => e.value == 1326 ? e.selected = true : "");document.querySelectorAll("select[title=Kategoria]")[0].dispatchEvent(new Event("change"));},100);setTimeout(()=>{Array.from(document.querySelectorAll("select[title=Kategoria]")[1].querySelectorAll("option")).forEach(e => e.value == 1327 ? e.selected = true : "");document.querySelectorAll("select[title=Kategoria]")[1].dispatchEvent(new Event("change"));},200);setTimeout(()=>{document.querySelector("#classified_name").value=lento24.title;document.querySelector("#classified_price").value=lento24.price;document.querySelector("#classified_description").value=lento24.description;document.querySelector("#classified_address").value=lento24.location;document.querySelector("#classified_phone").value=lento24.phone;document.querySelector("#classified_email").value="uslugi@onet.pl";document.querySelector("#classified_ratingValue_4").checked=true;document.querySelector("#classified_rules").checked=true;},300);" title="TwojaOferta">TwojaOferta</a>
        <script type="text/javascript">
            const searchEngines = {
                'Translate': 'https://pl.bab.la/slownik/angielski-polski/%s',
                'NPM': 'https://www.npmjs.com/package/%s',
                'NPM search': 'https://www.npmjs.com/search?q=%s',
                'SJP': 'https://sjp.pwn.pl/szukaj/%s.html',
            };
            const xhr = new XMLHttpRequest;
            xhr.responseType = 'document';
            xhr.onload = function(){
                if (xhr.readyState === xhr.DONE && xhr.status === 200) {
                    const res = document.querySelector('#response');
                    res.innerHTML = '';
                    res.appendChild(xhr.response.querySelector('.page .column-wrapper .content'));
                    res.querySelector('.quick-result-entry:last-child').remove();
                } else {
                    console.log('error', xhr.response);
                }
            }

            const getTextSelection = () => {
                return document.activeElement.getSelection();
            }
            const getTranslation = function(word){
                xhr.open('get', 'https://pl.bab.la/slownik/angielski-polski/' + word);
                xhr.send();
            }
            const searchNow = function(engine, searchEngines) {
                const selection = window.getSelection().toString();
                const url = searchEngines[engine].replace('%s', selection);
                window.open(url, 'Search ');
            }
            const stringify = (object) => {
                return object
                    .toString()
                    .replace(/(?:\r\n|\r|\n)/g, ' ')
                    .replace(/ {2}/g, '');
            }
            const insertBookmarklets = () => {
                for (name in searchEngines) {
                    const link = document.createElement('a');
                    const func = stringify(searchNow);
                    const engines = JSON.stringify(searchEngines);
                    link.href = 'javascript:(' + func + ')("' + name + '", ' + engines + ')';
                    link.target = '_blank';
                    link.innerHTML = name;
                    document.body.appendChild(link);
                    document.body.appendChild(document.createElement('br'));
                }
            }
            insertBookmarklets();
            
            /* other */
            async function dImg(name, src) {
                const image = await fetch(src);
                const imageBlog = await image.blob();
                const imageURL = URL.createObjectURL(imageBlog);
                const link = document.createElement('a');
                link.href = imageURL;
                link.download = name;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
            const lento = () => {
                navigator.clipboard.writeText(JSON.stringify({
                title:document.querySelector("h2").innerHTML,
                phone:window.atob(document.querySelector(".btn-blue.phone-partial.licon-phone-f").dataset.phone),
                location:document.querySelector(".userbox-location-city.licon-pin-f").innerHTML,
                price:document.querySelector(".price")?document.querySelector(".price").innerHTML.replace("zł","").replace(/ /g,""):null,
                description:document.querySelector(".desc.text-15").innerHTML.replace(/<h3.+>.+<\/h3>/,""),
                }));
                dImg(Date.now(),document.querySelector("#big-img picture img").src);
            }
            const o24h = () => {
                var lento24={};
                navigator.clipboard.readText().then(data=>lento24=JSON.parse(data));
                setTimeout(()=>{
                    Array.from(document.querySelectorAll(".select_kategoria>option")).forEach(e=>e.value==936?e.selected=true:"");
                    document.querySelector(".select_kategoria").dispatchEvent(newEvent("change"));
                    Array.from(document.querySelectorAll(".select_kategoria.select_podkategorie>option")).forEach(e=>e.value==976?e.selected=true:"");
                    Array.from(document.querySelectorAll("select[name=typ]>option")).forEach(e=>e.value==1?e.selected=true:"");
                    document.querySelector("input[name=tytul]").value=lento24.title;
                    document.querySelector("input[name=lokalizacja]").value=lento24.location;
                    document.querySelector("input[name=formularz_kontaktowy]").checked=false;
                    document.querySelector("input[name=cena]").value=lento24.price;
                    document.querySelector("input[name=telefon]").value=lento24.phone;
                    CKEDITOR.instances.opis.setData(lento24.description)
                },100);
            }
        </script>
    </body>
</html>
